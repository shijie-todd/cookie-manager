# 测试指南

## 测试前准备

1. 确保已按照README.md中的说明安装插件
2. 在`icons/`目录下放置了所需的图标文件
3. 打开Chrome浏览器的开发者工具（F12）查看控制台输出

## 测试步骤

### 1. 测试配置创建

1. 点击插件图标打开弹窗
2. 点击"新建配置"按钮
3. 输入配置名称（如"测试配置1"）
4. 点击"创建"
5. **预期结果**：配置列表中显示新创建的配置

### 2. 测试域名管理

1. 在配置列表中，点击某个配置的"域名"按钮
2. 输入域名（如`example.com`）
3. 点击"添加"
4. **预期结果**：域名列表中显示添加的域名
5. 点击域名的"删除"按钮
6. **预期结果**：域名从列表中移除

### 3. 测试配置切换

1. 创建两个配置（配置A和配置B）
2. 为配置A添加一个域名（如`example.com`）
3. 访问该域名，让浏览器设置一些Cookie
4. 启用插件并切换到配置A
5. 等待几秒让插件记录Cookie
6. 切换到配置B
7. **预期结果**：
   - 浏览器中的Cookie被清空
   - 配置B的Cookie被加载（如果之前保存过）

### 4. 测试Cookie自动记录

1. 创建一个配置并添加域名（如`example.com`）
2. 启用插件并切换到该配置
3. 访问该域名，进行登录或其他会产生Cookie的操作
4. 打开开发者工具，查看Service Worker的控制台
5. **预期结果**：控制台显示Cookie保存的日志

### 5. 测试插件启用/禁用

1. 点击插件顶部的开关，禁用插件
2. **预期结果**：插件不再记录Cookie变化
3. 重新启用插件
4. **预期结果**：插件重新开始记录Cookie变化

### 6. 测试配置删除

1. 创建一个测试配置
2. 点击该配置的"删除"按钮
3. 确认删除
4. **预期结果**：配置从列表中移除

## 常见问题排查

### Service Worker报错

如果Service Worker报错，检查：
1. 所有导入路径是否正确
2. manifest.json中是否设置了`"type": "module"`
3. 控制台中的具体错误信息

### Cookie无法恢复

可能的原因：
1. Cookie设置了`httpOnly`属性（无法通过JavaScript设置）
2. Cookie的`SameSite`属性限制
3. 域名不匹配

### 插件无法加载

检查：
1. manifest.json格式是否正确
2. 所有文件路径是否存在
3. 图标文件是否存在

## 性能测试

1. 创建多个配置（10+）
2. 每个配置添加多个域名（5+）
3. 测试切换配置的速度
4. **预期结果**：切换操作在合理时间内完成（<5秒）

## 边界情况测试

1. **空配置切换**：切换到没有域名的配置
2. **大量Cookie**：测试包含100+ Cookie的配置切换
3. **特殊字符**：配置名称包含特殊字符
4. **长域名**：添加很长的域名

